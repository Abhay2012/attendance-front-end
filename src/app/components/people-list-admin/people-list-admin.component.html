<div class="container">
    <!-- <button class="btn btn-default" routerLink="../../">Back</button> -->
    <h3 style='color:#4aa23a'>Group Attendance</h3>

    <div class="detail">
        <h5>Group Name: {{grpAttendance?.group_name}}</h5>
        <h5>Address : {{grpAttendance?.address_name}}</h5>
        <h5 *ngIf="grpAttendance?.date">Date : {{grpAttendance?.date}}</h5>
    </div>

    <div *ngIf="grpAttendance?.attendance" style="margin-top:20px">
        <h4> Student List</h4>
        <p>Select the student to view Signature or Absent Note for the selected date</p>

        <div class="table-responsive">
            <table class="table  table-striped table-bordered">

                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Student Name</th>
                        <th scope="col">Attendance</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let a of grpAttendance?.attendance; let i=index" (click)="onPeopleSelect(a)">
                        <td>{{i+1}}</td>
                        <td>{{a.name}}</td>
                        <td *ngIf="a.present==true">
                            <i class="fa fa-lg fa-check" style="color:#4aa23a" aria-hidden="true"></i>
                        </td>
                        <td *ngIf="a.present==false">
                            <i class="fa fa-lg fa-times" style="color:red" aria-hidden="true"></i>
                        </td>
                        <td *ngIf="a.present==null|| a.present==undefined">'Not Available'</td>
                    </tr>

                </tbody>

            </table>
        </div>
    </div>

    <div *ngIf="!grpAttendance?.attendance">
        <h4>No Attendance available for this group at this date</h4>
    </div>
</div>


<!-- ATTENDANCE DETAIL MODAL -->

<div class="modal fade" id="attendanceDetailModal" tabindex="-1" role="dialog" aria-labelledby="attendanceDetailModalTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">{{clickedPerson?.name}}'s {{clickedPerson?.present?'Signature':'Absent Note'}} </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf="clickedPerson && clickedPerson.present">
                    <img [src]="clickedPersonSign" alt="Signature Image">
                </div>
                <div *ngIf="clickedPerson && !clickedPerson.present">

                    <p>{{clickedPerson.note || 'Absent note Not Available'}}</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>